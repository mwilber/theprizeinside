function UserLogin(){this.panel=new Popup("userlogin");this.panel.elem.find(".close").click(this.Close(this));this.panel.elem.find("#btnfacebook").click(this.DoLogin(this,"fb"));this.panel.elem.find("#btntwitter").click(this.DoLogin(this,"tw"));this.panel.elem.find("#btnfoursquare").click(this.DoLogin(this,"fs"));this.ref=null}
UserLogin.prototype.DoLogin=function(b,a){return function(){switch(a){case "fb":b.ref=window.open("http://theprizeinside.com/reactor/oauth/login/facebook","_blank","location=yes");break;case "tw":b.ref=window.open("http://theprizeinside.com/reactor/oauth/login/twitter","_blank","location=yes");break;case "fs":b.ref=window.open("http://theprizeinside.com/reactor/oauth/login/foursquare","_blank","location=yes")}b.ref.addEventListener("loadstop",b.HandleAuthPopup(b))}};
UserLogin.prototype.HandleAuthPopup=function(b){return function(a){0<String(a.url).indexOf("oauth/profile")&&(a=String(a.url).split("/"),isNaN(parseInt(a[a.length-1]))||(lsUserId=parseInt(a[a.length-1]),localStorage.userid=parseInt(a[a.length-1]),panel.userlogin.ref.close(),panel.userlogin.panel.Hide(),autoCkLocation=new google.maps.LatLng(0,0),QueryLocation()))}};UserLogin.prototype.Close=function(b){return function(){b.panel.Hide();return!1}};UserLogin.prototype.Load=function(){this.Show()};
UserLogin.prototype.Show=function(){this.panel.Show();return!0};