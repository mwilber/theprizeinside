function LocationOptions(){this.panel=new MessageBox("locationoptions");this.panel.elem.find(".close").click(this.Close(this))}LocationOptions.prototype.Close=function(a){return function(){a.panel.Hide();return!1}};
LocationOptions.prototype.Load=function(a){DebugOut("Location:");DebugOut(a);var b="http://maps.googleapis.com/maps/api/streetview?location="+a.location.address+","+a.location.postalCode+"&size=640x640&sensor=false",b=b.split(" ").join("%20");this.panel.elem.find(".name").empty();this.panel.elem.find(".fn").empty();this.panel.elem.find(".street-address").empty();this.panel.elem.find(".region").empty();this.panel.elem.find(".postal-code").empty();this.panel.elem.find(".country-name").empty();this.panel.elem.find(".tel").empty();
this.panel.elem.find(".name").html(a.name);this.panel.elem.find(".showdirections, .mapdirections").click(function(){var b="http://maps.google.com/?saddr="+userLocation.lat()+","+userLocation.lng()+"&daddr="+escape(a.location.address)+","+a.location.postalCode;device&&"iOS"==device.platform&&(b="http://maps.apple.com/?saddr="+userLocation.lat()+","+userLocation.lng()+"&daddr="+escape(a.location.address)+","+a.location.postalCode);window.open(b,"_system");_gaq.push(["_trackEvent","External","Driving Directions",
""]);return!1});this.panel.elem.find(".showwebsite").click(function(){window.open(a.url,"_system");_gaq.push(["_trackEvent","External","Restaurant Site",""]);return!1});DebugOut("url('"+b+"');");this.panel.elem.find(".fn").html(a.name);this.panel.elem.find(".street-address").html(a.location.address);this.panel.elem.find(".city").html(a.location.city);this.panel.elem.find(".region").html(a.location.state);this.panel.elem.find(".postal-code").html(a.location.postalCode);this.panel.elem.find(".country-name").html(a.location.country);
this.panel.elem.find(".showcheckin").off("click");this.panel.elem.find(".showcheckin").click(this.Checkin(this,null,a));this.Show()};LocationOptions.prototype.Checkin=function(a,b,c){return function(){panel.checkin.Load(b,c);a.panel.Hide();return!1}};LocationOptions.prototype.Show=function(){this.panel.Show();return!0};