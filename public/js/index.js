var LOCATION_CK_INTERVAL=15E3,DISTANCE_CHANGE_REFRESH_THRESHOLD=10,CHECKIN_NOTIFICATION_THRESHOLD=0.05,apipath="http://theprizeinside.com",userLocation=new google.maps.LatLng(0,0),autoCkLocation=new google.maps.LatLng(0,0),wallmap=!1,locationTimer,lsUserId=0,prizedata=null,fsdata=[],gaPlugin=!1,dict={en:{checkinPublic:"Post my name and location on The Prize Inside website.",checkinAnonymous:"Do not post my name and location on The Prize Inside website.",commentDefault:"Comment"}},lang=dict.en,panel=
[],app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){app.receivedEvent("deviceready");void 0!=window.plugins&&(gaPlugin=window.plugins.gaPlugin,gaPlugin.init(GASuccess,GAFail,"UA-76054-25",10));supports_html5_storage()&&void 0!=localStorage.userid&&(lsUserId=parseInt(localStorage.userid));pictureSource=navigator.camera.PictureSourceType;destinationType=navigator.camera.DestinationType;AppInit();
$(window).trigger("resize");$(window).trigger("orientationchange");gaPlugin&&gaPlugin.trackEvent(GASuccess,GAFail,"App","Init","",1)},receivedEvent:function(a){document.getElementById(a);console.log("Received Event: "+a)}};
$(window).resize(function(){var a=$("#home .header").height()+$("#home .name").height()+$("#footer").height()+2*parseInt($("#home .name").css("padding-top"));1E3<$(window).width()&&(a=$("#home .name").height()+2*parseInt($("#home .name").css("padding-top")));$("#home .content").css("height",$("#home").height()-a+"px");a=$("#prize .header").height()+$("#prize .tabs").height()+$("#footer").height()+$("#prize .name").height()+2*parseInt($("#prize .name").css("padding-top"));1E3<$(window).width()&&(a=
$("#prize .tabs").height()+$("#prize .name").height()+2*parseInt($("#prize .name").css("padding-top")));$("#prize .tabpanel").css("width",$("#prize").width()+"px");$("#prize .tabpanel").css("height",$("#prize").height()-a+"px")});$(window).on("orientationchange",function(){var a=0,b=0;switch(window.orientation){case -90:case 90:a=$(window).height();b=$(window).width();break;default:a=$(window).width(),b=$(window).height()}1E3<a&&500<b?WallMapInit():panel.prize.locmap=null;$(window).trigger("resize")});
function AppInit(){DebugOut("initing app");panel.prize=new Prize;panel.home=new Home;panel.checkin=new Checkin;panel.checkindetail=new CheckinDetail;panel.location=new Location;panel.userlocation=new UserLocation;panel.userprofile=new UserProfile;panel.userlogin=new UserLogin;panel.info=new Info;panel.locationoptions=new LocationOptions;panel.home.Load()}
function AdInit(){document.addEventListener("onReceiveAd",function(){$(window).trigger("resize")});admob.createBannerView({publisherId:"ca-app-pub-9860806024628930/2903343809",adSize:admob.AD_SIZE.BANNER},HandleAdSuccess,HandleAdFail)}
function HandleAdSuccess(){DebugOut("ad init success.");admob.requestAd({isTesting:!1,extras:{color_bg:"AAAAFF",color_bg_top:"FFFFFF",color_border:"FFFFFF",color_link:"000080",color_text:"808080",color_url:"008000"}},function(){DebugOut("handle ad success!")},function(){DebugOut("handle ad fail")})}function HandleAdFail(){DebugOut("ad init failed.")}
function WallMapInit(){$("#wallmap").show();if(!wallmap){var a={zoom:15,center:new google.maps.LatLng(40.6687125,-73.5270709),mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!0,streetViewControl:!1,disableDefaultUI:!0};wallmap=new google.maps.Map(document.getElementById("wallmap"),a);panel.prize.locmap=wallmap}}
function GetFSData(){DebugOut("getting fs data: ");for(idx in prizedata){var a=prizedata[idx];$.get("https://api.foursquare.com/v2/venues/search?client_id=UMRUA4UFFY0RLEI1TKGXUT30JLQULNFRM3YVQWNCASQ3VE31&client_secret=4XSWL2PUIN02A3RNJY4GFRCLISF4RPC3URLVLHK2AOQD0EQ5&v=20130815&ll="+userLocation.lat()+","+userLocation.lng()+"&limit=10&query="+a.restaurant.restaurantName,HandleFSData(a))}}
function HandleFSData(a){return function(b){DebugOut("FS Data Incoming...");fsdata[a.restaurant.restaurantAlias]=b;QueryLocation();DebugOut(fsdata);panel.prize.HandleLocationData(panel.prize)(fsdata[panel.prize.restaurantalias])}}function HandleLogin(a){alert("got it");DebugOut(a)};