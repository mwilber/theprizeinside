function Location(){this.panel=new Panel("location");this.backId="prize";this.panel.elem.find(".back").click(this.Back(this))}Location.prototype.Back=function(a){return function(){panel[a.backId].Show();return!1}};Location.prototype.Checkin=function(a,b,d){return function(){panel.checkin.Load(b,d);return!1}};
Location.prototype.Load=function(a){this.panel.elem.find(".name").empty();this.panel.elem.find("#staticmap").attr("src","");this.panel.elem.find(".fn").empty();this.panel.elem.find(".street-address").empty();this.panel.elem.find(".region").empty();this.panel.elem.find(".postal-code").empty();this.panel.elem.find(".country-name").empty();this.panel.elem.find(".tel").empty();var b=this.panel.elem.find(".header").height()+this.panel.elem.find(".tabs").height()+this.panel.elem.find(".name").height()+
2*parseInt(this.panel.elem.find(".name").css("padding-top"));DebugOut("offsetheight: "+b);var b="http://maps.googleapis.com/maps/api/staticmap?zoom=13&size="+Math.floor(640*(this.panel.elem.width()/(this.panel.elem.height()-b)))+"x640&maptype=roadmap&markers=color:red%7Clabel:C%7C"+a.location.lat+","+a.location.lng+"&sensor=false",d="http://maps.googleapis.com/maps/api/streetview?location="+a.location.address+","+a.location.postalCode+"&size="+this.panel.elem.width()+"x"+Math.floor(this.panel.elem.find(".header").height()+
200)+"&sensor=false";this.panel.elem.find(".name").html(a.name);this.panel.elem.find(".showdirections, .mapdirections").click(function(){window.open("http://maps.google.com/?saddr="+userLocation.lat()+","+userLocation.lng()+"&daddr="+a.location.address+","+a.location.postalCode,"_system");return!1});this.panel.elem.find("#staticmap").attr("src",b);this.panel.elem.find("#streetview").attr("src",d);this.panel.elem.find(".fn").html(a.name);this.panel.elem.find(".street-address").html(a.location.address);
this.panel.elem.find(".city").html(a.location.city);this.panel.elem.find(".region").html(a.location.state);this.panel.elem.find(".postal-code").html(a.location.postalCode);this.panel.elem.find(".country-name").html(a.location.country);this.panel.elem.find(".showcheckin").off("click");this.panel.elem.find(".showcheckin").click(this.Checkin(this,null,a));DebugOut(a);this.Show()};
Location.prototype.HandleLocationData=function(a){return function(b,d){DebugOut(b);a.panel.elem.find("#locations").show();a.panel.elem.find("#locations ul").empty();for(idx in b.response.venues){var c=b.response.venues[idx];a.panel.elem.find("#locations ul").append($("<li>").append($("<div/>").addClass("details fa fa-caret-right")).append($("<div/>").addClass("address").html(c.location.address)).append($("<div/>").addClass("city").html(c.location.city+", "+c.location.state+" "+c.location.postalCode)).click(a.HandleLocationClick(a,
c)))}}};Location.prototype.HandleLocationClick=function(a,b){return function(a){return!1}};Location.prototype.Show=function(){this.panel.Show();return!0};